!function(a){var c="VI_WEBRTC_STATE_IDLE",d="VI_WEBRTC_STATE_WS_CONNECTING",e="VI_WEBRTC_STATE_WS_CONNECTED",f="VI_WEBRTC_STATE_WS_CONNECTED",g=a.VI_CALL_STATE_ALERTING="ALERTING",h=a.VI_CALL_STATE_PROGRESSING="PROGRESSING",i=a.VI_CALL_STATE_CONNECTED="CONNECTED",j=a.VI_CALL_STATE_ENDED="ENDED";a.ZingayaAPI=function(a,b){var y,z,A,D,E,F,G,H,I,X,Y,k=5e3,l=[],m=[],n=!(!1===b),o=function(){return l.length?l.pop():document.createElement("audio")},p=function(a){z(a,null),l.push(a)},q=function(){return m.length?m.pop():document.createElement("video")},r=function(a){z(a,null),m.push(a)},s=function(a){if(a){if(a.audioTracks)return a.audioTracks;if(a.getAudioTracks)return a.getAudioTracks()}return null},t=function(a){if(a){if(a.videoTracks)return a.videoTracks;if(a.getVideoTracks)return a.getVideoTracks()}return null},u=function(a,b){if(a)for(var c in a)a[c].enabled=b},v=a===!0?!0:!1,x="wss",B=null,C=c,J=!1,K=!1,L=!0,M=!1,N=null,O=null,P=1,Q=function(){D="undefined"!=typeof webkitRTCPeerConnection,E="undefined"!=typeof mozRTCPeerConnection,F="undefined"!=typeof MediaStreamTrack&&"undefined"!=typeof MediaStreamTrack.getSources,G=null,H=null,I=null,E&&(A=mozRTCPeerConnection,y=navigator.mozGetUserMedia.bind(navigator),z=function(a,b){b?(a.mozSrcObject=b,a.load(),a.play()):(a.mozSrcObject=null,a.load())}),D&&(A=webkitRTCPeerConnection,y=navigator.webkitGetUserMedia.bind(navigator),z=function(a,b){b?(a.src=webkitURL.createObjectURL(b),a.load(),a.play()):a.pause()})},R=null,S={},T={},U=0,V=function(a){"function"==typeof this.writeLog&&this.writeLog(a)}.bind(this),W=function(a){"function"==typeof this.writeTrace&&this.writeTrace(a)}.bind(this),Z={year:"numeric",month:"numeric",day:"numeric"};this.writeLog=function(a){if (BXIM) {BXIM.webrtc.phoneLog("VI WebRTC: "+(new Date).toLocaleTimeString("en-US",Z)+" "+a)}},this.writeTrace=function(a){if (BXIM) {BXIM.webrtc.phoneLog("VI WebRTC: "+(new Date).toLocaleTimeString("en-US",Z)+" "+a)}},this.onConnectionEstablished=null,this.onConnectionFailed=null,this.onConnectionClosed=null,this.onLoginSuccessful=null,this.onLoginFailed=null,this.onIncomingCall=null,this.onCallRinging=null,this.onCallMediaStarted=null,this.onCallConnected=null,this.onCallEnded=null,this.onCallFailed=null,this.onSIPInfoReceived=null,this.onInstantMessageReceived=null,this.onTransferComplete=null,this.onTransferFailed=null,this.onNetStatsReceived=null;var $=function(a){var b={};for(var c in a)("X-"==c.substring(0,2)||"VI-CallData"==c)&&(b[c]=a[c]);return b},_=function(){U=0;for(var a in S)U++},ab=function(a){S[a.id()]=a,_()},bb=function(a){delete S[a],_()}.bind(this);Q();var cb=function(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b},db=function(){};this.muteMicrophone=function(a){J=a,R&&u(s(R),!a)},this.sendVideo=function(a){L=a,R&&u(t(R),a)},this.mutePlayback=function(a){K=a;for(var b in T)T[b].updateSpeakerMuteState()},this.setPlaybackVolume=function(a){P=a;for(var b in T)T[b].setPlaybackVolume(a)},this.getCalls=function(){var a=[];for(var b in S)a.push(b);return a},this.setLocalVideoSink=function(a){X=a,R&&z(a,R)},this.setRemoteSinksContainerId=function(a){Y=a},this.stopLocalStream=function(){R&&(R.stop(),R=null)}.bind(this),this.destroy=function(){this.disconnect(),this.stopLocalStream()}.bind(this),this.disconnect=function(){B&&(hb(),B.onclose=null,B.close(),eb())},this.useAudioSource=function(a,b,c,d){F&&(G=a,this.requestMedia(d,b,c,v))}.bind(this),this.useVideoSource=function(a,b,c){F&&(H=a,this.requestMedia(!0,b,c,!0))}.bind(this),this.setConstraints=function(a,b,c){I=a,this.requestMedia(v,b,c,v)}.bind(this),this.requestMedia=function(a,b,c,d){if(null==G&&null==H)var e={audio:!0,video:a===!0?!0:!1};else if(null!=G&&null!=H)var e={audio:{optional:[{sourceId:G}]},video:{optional:[{sourceId:H}]}};else if(null!=G)var e={audio:{optional:[{sourceId:G}]},video:a===!0?!0:!1};else if(null!=H)var e={audio:!0,video:{optional:[{sourceId:H}]}};null!=I&&(e.video=new Object,"undefined"!=typeof I.mandatory&&(e.video.mandatory=I.mandatory),"undefined"!=typeof I.optional?(e.video.optional=I.optional,null!=H&&e.video.optional.push({sourceId:H})):null!=H&&(e.video.optional=[{sourceId:H}])),R&&d&&(R.stop(),R=null),y(e,function(a){if(R){R.stop();for(var c in T)T[c].setLocalStream(null)}V("Media access granted"),R=a,u(s(R),!J),X&&z(X,a);for(var c in T)T[c].setLocalStream(R);"function"==typeof b&&b();for(var c in jb)kb(c,jb[c]);jb={}}.bind(this),function(a){V("Media access rejected: "+a.name),"function"==typeof c&&c(a.name)})}.bind(this),this.getRemoteParty=function(a){return S[a]?S[a].getRemoteParty():null},this.getCallState=function(a){return S[a]?S[a].getState():null},this.setCallActive=function(a,b){return S[a]?(b?this.unholdCall(a):this.holdCall(a),S[a].setStreamsActive(b)):void 0},this.isCallActive=function(a){return S[a]?S[a].streamsAreActive():!1},this.connectTo=function(a,b,e){C==c?(B=new WebSocket(x+"://"+a+"/platform?version=2&client="+(E?"firefox":"chrome")+"&referrer="+encodeURIComponent(b)+"&extra="+encodeURIComponent(e)+"&video="+(v===!0?"true":"false")+"&q="+cb(12)),C=d,B.onopen=gb,B.onclose=hb,B.onerror=fb,B.onmessage=mb):V("Error: called connectTo while in state "+C)}.bind(this),this.login=function(a,b,c){return C!=f?(V("login called while in state "+C),void 0):(qb("login",[a,b,c?c:null]),void 0)},this.loginStage2=function(a,b,c){return C!=f?(V("loginStage2 called while in state "+C),void 0):(qb("loginStage2",[a,b,c?c:null]),void 0)},this.loginGenerateOneTimeKey=function(a){return C!=f?(V("loginGenerateOneTimeKey called while in state "+C),void 0):(qb("loginGenerateOneTimeKey",[a]),void 0)},this.loginUsingOneTimeKey=function(a,b,c){return C!=f?(V("loginUsingOneTimeKey called while in state "+C),void 0):(qb("loginUsingOneTimeKey",[a,b,c?c:null]),void 0)},this.setOperatorACDStatus=function(a){return C!=f?(V("setOperatorACDStatus called while in state "+a),void 0):(qb("setOperatorACDStatus",[a]),void 0)},this.callTo=function(a,b,c,d){var e=cb(36),f=new ob(e,h,a,"");return S[e]=f,qb("createCall",[-1,a,b,e,null,null,$("undefined"==typeof c?{}:c),d]),ab(f),e},this.transferCall=function(a,b){var c=[a,b];for(var d in c){var e=S[c[d]];if(!e)return V("ERROR: trying to transfer unknown call "+e.id()),void 0;if(e.getState()!=i)return V("ERROR: trying to transfer call "+e.id()+" in state "+e.getState()),void 0}qb("transferCall",[a,b])},this.hangupCall=function(a,b){var c=S[a];c?c.getState()==g?qb("rejectCall",[a,!0,$(b)]):qb("disconnectCall",[a,$(b)]):V("ERROR: trying to hangup unknown call "+a)},this.rejectCall=function(a,b,c){var d=S[a];d?d.getState()==g?qb("rejectCall",[a,!0,$(c)]):V("ERROR: trying to reject call "+a+" in state "+d.getState()):V("ERROR: trying to reject unknown call "+a)},this.answerCall=function(a,b){var c=S[a];c?c.getState()==g?qb("acceptCall",[a,$(b)]):V("ERROR: trying to answer call "+a+" in state "+c.getState()):V("ERROR: trying to answer unknown call "+a)},this.sendDigit=function(a,b){var c=S[a];c?c.getState()==i?qb("sendDTMF",[a,b]):V("ERROR: trying to send digit to call "+a+" in state "+c.getState()):V("ERROR: trying to send digit to unknown call "+a)},this.holdCall=function(a){var b=S[a];b?b.getState()==i?qb("hold",[a]):V("ERROR: trying to hold call "+a+" in state "+b.getState()):V("ERROR: trying to hold unknown call "+a)},this.unholdCall=function(a){var b=S[a];b?b.getState()==i?qb("unhold",[a]):V("ERROR: trying to unhold call "+a+" in state "+b.getState()):V("ERROR: trying to unhold unknown call "+a)},this.sendSIPInfo=function(a,b,c,d,e){var f=S[a];f?f.getState()==i?qb("sendSIPInfo",[a,b,c,d,$(e)]):V("ERROR: trying to send SIP Info to call "+a+" in state "+f.getState()):V("ERROR: trying to send SIP Info to unknown call "+a)},this.sendInstantMessage=function(a,b){this.sendSIPInfo(a,"application","zingaya-im",b,{})},this.getVideoElementId=function(a){var b=S[a];return b?b.getVideoElementId():(V("ERROR: No such call "+a),void 0)},this.getStats=function(a,b){var c=T[a];c&&c.getStats(b)};var eb=function(){for(var a in T)T[a].close();T={},S={},U=0,N&&clearTimeout(N),O&&clearTimeout(O)},fb=function(a){B.oncloe=null,V("WS error: "+a),C=c,eb(),"function"==typeof this.onConnectionFailed&&this.onConnectionFailed(a)}.bind(this),gb=function(){C=e,V("WS connected")}.bind(this),hb=function(){V("WS closed");var a=C==f,b=a?this.onConnectionClosed:this.onConnectionFailed;C=c,eb(),"function"==typeof b&&b("Connection closed")}.bind(this),ib=function(){N=null,qb("__ping",[]),O=setTimeout(function(){O=null,V("WS closed");var a=C==f,b=a?this.onConnectionClosed:this.onConnectionFailed;C=c,eb(),"function"==typeof b&&b("Connection closed")}.bind(this),k)}.bind(this),jb={},kb=function(a,b){T[a]&&T[a].close();var c=new pb(a,b);S[a]&&c.setStreamsActive(S[a].streamsAreActive()),T[a]=c,c.setLocalStream(R),c.start();var d=S[a];d&&(S[a].setPeerConnection(c),c.setCall(d))},lb={__createPC:function(a,b){!n||R||"__default"==a?kb(a,b):jb[a]=b},__destroyPC:function(a){T[a]&&(T[a].close(),delete T[a]),delete jb[a]},__onPCStats:function(a,b){T[a]&&"function"==typeof this.onNetStatsReceived&&this.onNetStatsReceived(b)},__pong:function(){O&&(clearTimeout(O),O=null,N=setTimeout(ib,k))},__connectionSuccessful:function(){C==e&&(C=f,"function"==typeof this.onConnectionEstablished&&this.onConnectionEstablished(),N=setTimeout(ib,k))},loginSuccessful:function(a,b){"function"==typeof this.onLoginSuccessful&&this.onLoginSuccessful(a,b)},loginFailed:function(a,b){"function"==typeof this.onLoginFailed&&this.onLoginFailed({errorCode:a,oneTimeKey:b})},handleConnectionConnected:function(a,b){var c=S[a];c?c.getState()==h||c.getState()==g?(c.setState(i),"function"==typeof this.onCallConnected&&this.onCallConnected(a,b)):V("WARNING: received handleConnectionConnected for call: "+a+" in invalid state: "+c.getState()):V("WARNING: received handleConnectionConnected for unknown call: "+a)},stopRinging:function(a){var b=S[a];b?"function"==typeof this.onCallMediaStarted&&this.onCallMediaStarted(a):V("WARNING: received stopRinging for unknown call: "+a)},handleConnectionDisconnected:function(a,b){var c=S[a];c?(c.setState(j),"function"==typeof this.onCallEnded&&this.onCallEnded(a,b),bb(a)):V("WARNING: received handleConnectionDisconnected for unknown call: "+a)},handleConnectionFailed:function(a,b,c,d){var e=S[a];e?e.getState()==h?(e.setState(j),"function"==typeof this.onCallFailed&&this.onCallFailed(a,b,c,d),bb(a)):V("WARNING: received handleConnectionFailed for call: "+a+" in invalid state: "+e.getState()):V("WARNING: received handleConnectionFailed for unknown call: "+a)},handleRingOut:function(a){var b=S[a];b?b.getState()==h?"function"==typeof this.onCallRinging&&this.onCallRinging(a):V("WARNING: received handleRingOut for call: "+a+" in invalid state: "+b.getState()):V("WARNING: received handleRingOut for unknown call: "+a)},handleIncomingConnection:function(a,b,c,d){var e=new ob(a,g,b,c);ab(e),"function"==typeof this.onIncomingCall?this.onIncomingCall(a,b,c,d):(this.rejectCall(a,486),V("WARNING: Received incoming call while no handler was specified"))},handleSIPInfo:function(a,b,c,d,e){var f=S[a];f?f.getState()==i||f.getState()==h||f.getState()==g?"application"==b&&"zingaya-im"==c?"function"==typeof this.onInstantMessageReceived&&this.onInstantMessageReceived(a,d):"function"==typeof this.onSIPInfoReceived&&this.onSIPInfoReceived(a,b+"/"+c,d,e):V("WARNING: received handleSIPInfo for call: "+a+" in invalid state: "+f.getState()):V("WARNING: received handleSIPInfo for unknown call: "+a)},handleSipEvent:function(){},handleTransferStarted:function(){},handleTransferComplete:function(a){var b=S[a];b?this.onTransferComplete&&this.onTransferComplete(a):V("WARNING: received handleTransferComplete for unknown call: "+a)},handleTransferFailed:function(a){var b=S[a];b?this.onTransferFailed&&this.onTransferFailed(a):V("WARNING: received handleTransferFailed for unknown call: "+a)}},mb=function(a){var b=JSON.parse(a.data),c=b.name,d=b.params;"__pong"!=c&&W("Called local function "+c+" with params "+JSON.stringify(d)),"function"==typeof lb[c]?lb[c].apply(this,d):V("Unknown function called: "+c),db()}.bind(this),nb=function(a,b){return"function"==typeof mozRTCSessionDescription?new mozRTCSessionDescription({type:a,sdp:b}):new RTCSessionDescription({type:a,sdp:b})},ob=function(a,b,c,d){var i,e=a,f=b,g=c,h=d,j=!0;this.id=function(){return e},this.getRemoteParty=function(){return g},this.getState=function(){return f},this.setState=function(a){f=a},this.getDisplayName=function(){return h},this.setPeerConnection=function(a){i=a},this.getPeerConnection=function(){return i},this.streamsAreActive=function(){return j},this.setStreamsActive=function(a){j=a,T[e]&&T[e].setStreamsActive(a)},this.getVideoElementId=function(){return i.getVideoElementId()}},pb=function(a,b){var g,c=new A(null,{optional:[{DtlsSrtpKeyAgreement:"true"}]}),d=a,e=function(a){V("PC "+d+": "+a)},f=function(a){W("PC "+d+": "+a)};this.setCall=function(a){g=a},this.getCall=function(){return g};var h,i;if(h=o(),h.id="vi_audio_"+d,h.volume=P,document.body.appendChild(h),v){i=q(),i.id="vi_video_"+d,i.width=400,i.height=300,i.volume=P;var j=Y?document.getElementById(Y):document.body;j.appendChild(i)}var k=nb("offer",b),l=null,m=!1,n=!1,w=null,x=null,y=null,B=!1,C=!1,D=!0;this.getStats=function(){y&&w&&c.getStats(function(a){var b=a.result();for(var c in b)"ssrc"==b[c].type&&(b[c].local==b[c]||!b[c].remote,b[c].remote==b[c]||!b[c].local)})},rtpCandidateGenerated=!1,rtpVideoCandidateGenerated=!1,rtcpCandidateGenerated=!1,rtcpVideoCandidateGenerated=!1,this.getRemoteAudioStream=function(){return w},this.getRemoteVideoStream=function(){return x},this.getVideoElementId=function(){return i?i.id:null},this.setLocalStream=function(a){C||(y&&(c.removeStream(y),y=null),a&&(y=a,"undefined"==typeof a.getAudioTracks?a.audioTracks:a.getAudioTracks(),"undefined"==typeof a.getVideoTracks?a.videoTracks:a.getVideoTracks(),y=a,c.addStream(y),u(y.getAudioTracks(),!J),u(y.getVideoTracks(),L)))};var E=function(){C||(e("Sending local answer"),f("Local answer: "+l.sdp),qb("__confirmPC",[d,l.sdp]))},F=function(a){C||(m=-1!=a.sdp.indexOf("a=rtcp-mux"),c.setLocalDescription(a,function(){l=a,-1!=a.sdp.indexOf("candidate")&&(n=!0,E())},function(a){e("ERROR: "+a)}))}.bind(this),G=function(){C||(f("Calling createAnswer"),c.createAnswer(F,function(a){V("ERROR: "+a)}))},H=function(a){if(!C)if(a.candidate){f("ICE candidate: "+a.candidate.candidate);var b=a.candidate.candidate;-1!=b.indexOf("1 udp")&&("audio"==a.candidate.sdpMid?rtpCandidateGenerated=!0:rtpVideoCandidateGenerated=!0),-1!=b.indexOf("2 udp")&&("audio"==a.candidate.sdpMid?rtcpCandidateGenerated=!0:rtcpVideoCandidateGenerated=!0),rtpCandidateGenerated&&(rtcpCandidateGenerated||m)&&(rtpVideoCandidateGenerated&&(rtcpVideoCandidateGenerated||m)||!v)&&(B=!0,n||(n=!0,c.createAnswer(function(a){l=a,E()})))}else e("End of candidates.")},I=function(){return C?(e("Renegotiation requested on closed PeerConnection"),void 0):null==l?(e("Renegotiation needed, but no local SD, skipping"),void 0):"connected"!=c.iceConnectionState&&"completed"!=c.iceConnectionState?(e("Renegotiation requested while ice state is "+c.iceConnectionState+". Postponing"),setTimeout(I,100),void 0):(M?e("Renegotiation in progress. Queueing"):e("Renegotiation started"),M=!0,c.setRemoteDescription(k,function(){return C?(M=!1,void 0):(c.createAnswer(function(a){return C?(M=!1,void 0):(l=a,c.setLocalDescription(l,function(){M=!1,e("Renegotiation successful")},function(a){M=!1,e("ERROR: "+a)}),void 0)},function(a){M=!1,e("ERROR: "+a)}),void 0)},function(a){M=!1,e("ERROR: "+a)}),void 0)},N=function(a){var b=t(a.stream).length>0;e("Remote stream added "+a.stream.id+" "+(b?"video":"audio")),b?x=a.stream:w=a.stream,b?i&&z(i,a.stream):z(h,a.stream),this.setStreamsActive(D)};this.setPlaybackVolume=function(a){h&&(h.volume=a),i&&(i.volume=a)},this.streamsAreActive=function(){return D},this.setStreamsActive=function(a){D=a,u(s(w),a&&!K),u(s(x),a&&!K),u(t(x),a),qb("__muteLocal",[d,!a])}.bind(this),this.updateMicrophoneMuteState=function(){},this.updateSpeakerMuteState=function(){w&&u(s(w),D&&!K)},this.activateStreams=function(){C||this.setStreamsActive(!0)},this.deactivateStreams=function(){C||this.setStreamsActive(!1)},c.onicecandidate=H.bind(this),c.onaddstream=N.bind(this),c.onnegotiationneeded=I.bind(this),this.start=function(){C||c.setRemoteDescription(k,function(){G()},function(a){V("ERROR: "+a)})},this.close=function(){C=!0,c.close(),h&&(h.parentNode.removeChild(h),p(h)),i&&(i.parentNode.removeChild(i),r(i))}},qb=function(a,b){"__ping"!=a&&W("Called remote function "+a+" with params "+JSON.stringify(b)),B?"undefined"!=typeof Array.prototype.toJSON||"undefined"!=typeof String.prototype.toJSON?B.send(VoxImplantJSON.stringify({name:a,params:b})):B.send(JSON.stringify({name:a,params:b})):V("ERROR: can't call remote function when not connected"),db()}}}(window.VoxImplant=window.VoxImplant||{}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),window.VoxImplantJSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(a){if(a instanceof Object){var b="";if(a.constructor===Array){for(var c=0;c<a.length;b+=this.stringify(a[c])+",",c++);return"["+b.substr(0,b.length-1)+"]"}if(a.toString!==Object.prototype.toString)return'"'+a.toString().replace(/"/g,"\\$&")+'"';for(var d in a)b+='"'+d.replace(/"/g,"\\$&")+'":'+this.stringify(a[d])+",";return"{"+b.substr(0,b.length-1)+"}"}return"undefined"==typeof a||0/0===a||1/0===a||a===-1/0?null:"number"==typeof a||a===!0||a===!1?a:"string"==typeof a?'"'+a.replace(/"/g,"\\$&")+'"':null}},window.JSON||(window.JSON=window.VoxImplantJSON),function(VoxImplant,undefined){VoxImplant.Utils={source:null,swfMovie:function(a){return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]},stringifyExtraHeaders:function(a){return a="[object Object]"==Object.prototype.toString.call(a)?JSON.stringify(a):null},cadScript:function(a){var b=a.split(";");return b.map(function(a){if(0!==a.length){var b=a.match(/\([0-9\/\.,\*\+]*\)$/),c=a.substring(0,b.index),d=b.pop();if(b.length)throw new Error("cadence script should be of the form `%f(%f/%f[,%f/%f])`");if(c="*"===c?1/0:parseFloat(c),isNaN(c))throw new Error("cadence length should be of the form `%f`");return d=d.slice(1,d.length-1).split(",").map(function(a){try{var b=a.split("/");if(b.length>3)throw new Error;return b=b.map(function(a,b){if(2===b){var c=a.split("+").map(function(a){var b=parseInt(a,10);if(isNaN(b))throw new Error;return b-1});return c}var d;if("*"==a&&(d=1/0),d=d?d:parseFloat(a,10),isNaN(d))throw new Error;return d}),{on:b[0],off:b[1],frequencies:b[2]}}catch(c){throw new Error("cadence segments should be of the form `%f/%f[%d[+%d]]`")}}),{duration:c,sections:d}}})},freqScript:function(a){var b=a.split(",");return b.map(function(a){try{var b=a.split("@"),c=parseInt(b.shift()),d=parseFloat(b.shift());if(b.length)throw Error();return{frequency:c,decibels:d}}catch(e){throw new Error("freqScript pairs are expected to be of the form `%d@%f[,%d@%f]`")}})},toneScript:function(a){var b=a.split(";"),c=VoxImplant.Utils.freqScript(b.shift()),d=VoxImplant.Utils.cadScript(b.join(";"));return{frequencies:c,cadences:d}},playToneScript:function(a,b){function g(a){f+=1/0!=a.duration?a.duration:20;for(var b=0;b<a.sections.length;b++)h(a.sections[b],a.duration)}function h(a,b){if(t=1/0!=b?b:b=20,0!=a.off&&1/0!=a.off)for(;t>0;)j(a.frequencies,a.on),t-=a.on,i(a.off),t-=a.off,t=parseInt(10*t)/10;else j(a.frequencies,b)}function i(a){for(var b=0;b<c.sampleRate*a;b++)e.push(0)}function j(a,b){for(var f=0;f<c.sampleRate*b;f++){for(var g=0,h=0;h<a.length;h++)g+=Math.pow(10,d.frequencies[a[h]].decibels/20)*Math.sin((e.length+f)*(3.14159265359/c.sampleRate)*d.frequencies[a[h]].frequency),10>f&&(g*=f/10),f>c.sampleRate*b-10&&(g*=(c.sampleRate*b-f)/10);e.push(g)}}if("undefined"!=typeof window.AudioContext||"undefined"!=typeof window.webkitAudioContext){window.AudioContext=window.AudioContext||window.webkitAudioContext;var c=new AudioContext,d=VoxImplant.Utils.toneScript(a),e=[],f=0;this.source=c.createBufferSource();for(var k=0;k<d.cadences.length;k++)1/0==d.cadences[k].duration&&(this.source.loop=!0),g(d.cadences[k]);this.source.connect(c.destination),sndBuffer=c.createBuffer(1,f*c.sampleRate,c.sampleRate),bufferData=sndBuffer.getChannelData(0);for(var l=0;l<f*c.sampleRate;l++)bufferData[l]=e[l];e=null,this.source.buffer=sndBuffer,b===!0&&(this.source.loop=!0),this.source.start(0)}},stopPlayback:function(){return null!=this.source?(this.source.stop(0),this.source=null,!0):!1},sendRequest:function(a,b,c,d){var e=!1,f=function(){for(var a=[function(){return new XDomainRequest},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=!1,c=0;c<a.length;c++){try{b=a[c](),0==c&&(e=!0)}catch(d){continue}break}return b},g=f();if(g){var h=d?"POST":"GET";if(e)g.onerror=function(){c(g)},g.ontimeout=function(){c(g)},g.onload=function(){b(g)},g.open(h,a),g.timeout=5e3,g.send();else{if(g.open(h,a,!0),d&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.onreadystatechange=function(){return 4==g.readyState?200!=g.status&&304!=g.status?(c(g),void 0):(b(g),void 0):void 0},4==g.readyState)return;g.send(d)}}},getServers:function(callback,reservedBalancer,vi){function balancerComplete(a){null!=a?callback(a):reservedBalancer!==!0?VoxImplant.Utils.getServers(callback,!0,vi):vi.dispatchEvent({name:"ConnectionFailed",message:"VoxImplant Cloud is unavailable"})}var protocol="https:"==document.location.protocol?"https://":"http://";balancer_url=reservedBalancer===!0?protocol+"balancer2.voximplant.com/getNearestHost?result_mode=JSONP&jsonp_callback=balancerComplete":protocol+"balancer.voximplant.com/getNearestHost?result_mode=JSONP&jsonp_callback=balancerComplete",VoxImplant.Utils.sendRequest(balancer_url,function(XHR){eval(XHR.responseText)},function(){balancerComplete(null)})}},VoxImplant.Call=function(a,b,c,d,e,f){var g=e,h=a,i=b,j=c,k=d,l=f;this.eventListeners={},this.call=function(a){return"undefined"==typeof a?h:(h=a,void 0)},this.__number=function(a){return"undefined"==typeof a?i:(i=a,void 0)},this.__displayName=function(){return j},this.__headers=function(){return k},this.RTC=function(){return g},this.zingayaAPI=function(){return l}},VoxImplant.Call.prototype={id:function(){return this.call()},number:function(){return this.__number()},displayName:function(){return this.__displayName()},headers:function(){return this.__headers()},active:function(){return this.RTC()?this.zingayaAPI().isCallActive(this.call()):VoxImplant.Utils.swfMovie("voximplantSWF").isCallActive(this.call())},state:function(){if(this.RTC())return this.zingayaAPI().getCallState(this.call());var a=VoxImplant.Utils.swfMovie("voximplantSWF").getCallState(this.call()).toUpperCase();switch(a){case"CONNECTING":a=VoxImplant.VI_CALL_STATE_ALERTING;break;case"CONNECTED_ON_HOLD":a=VoxImplant.VI_CALL_STATE_CONNECTED;break;case"DISCONNECTED":case"FAILED":a=VoxImplant.VI_CALL_STATE_ENDED}return a},answer:function(a,b){if("undefined"!=typeof a&&("undefined"==typeof b&&(b=new Object),b["VI-CallData"]=a),this.RTC()){if(this.zingayaAPI().getCallState(this.call())!=VoxImplant.VI_CALL_STATE_ALERTING)throw new Error("NO_INCOMING_CALL");this.zingayaAPI().answerCall(this.call(),b)}else b=JSON.stringify(b),VoxImplant.Utils.swfMovie("voximplantSWF").accept(this.call(),b)},decline:function(a){if(this.RTC()){if(this.zingayaAPI().getCallState(this.call())!=VoxImplant.VI_CALL_STATE_ALERTING)throw new Error("NO_INCOMING_CALL");this.zingayaAPI().rejectCall(this.call(),486,a)}else a=VoxImplant.Utils.stringifyExtraHeaders(a),VoxImplant.Utils.swfMovie("voximplantSWF").reject(this.call(),a)},reject:function(a){this.decline(a)},hangup:function(a){if(this.RTC()){if(this.zingayaAPI().getCallState(this.call())!=VoxImplant.VI_CALL_STATE_CONNECTED&&this.zingayaAPI().getCallState(this.call())!=VoxImplant.VI_CALL_STATE_PROGRESSING)throw new Error("WRONG_CALL_STATE");this.zingayaAPI().hangupCall(this.call(),a)}else a=VoxImplant.Utils.stringifyExtraHeaders(a),VoxImplant.Utils.swfMovie("voximplantSWF").disconnectCall(this.call(),a)},sendTone:function(a){if("*"==a)a=10;else if("#"==a)a=11;else if(a=parseInt(a),0>a||a>9)throw new Error("WRONG_TONE_INPUT");if(this.RTC()){if(this.zingayaAPI().getCallState(this.call())!=VoxImplant.VI_CALL_STATE_CONNECTED)throw new Error("CALL_NOT_CONNECTED");this.zingayaAPI().sendDigit(this.call(),a)}else VoxImplant.Utils.swfMovie("voximplantSWF").sendDTMF(a,this.call())},mutePlayback:function(){this.RTC()?this.zingayaAPI().mutePlayback(!0):VoxImplant.Utils.swfMovie("voximplantSWF").muteIncomingAudio(this.call())},muteMicrophone:function(){this.RTC()?this.zingayaAPI().muteMicrophone(!0):VoxImplant.Utils.swfMovie("voximplantSWF").muteOutgoingAudio(this.call())},unmutePlayback:function(){this.RTC()?this.zingayaAPI().mutePlayback(!1):VoxImplant.Utils.swfMovie("voximplantSWF").unmuteIncomingAudio(this.call())},unmuteMicrophone:function(){this.RTC()?this.zingayaAPI().muteMicrophone(!1):VoxImplant.Utils.swfMovie("voximplantSWF").unmuteOutgoingAudio(this.call())},showRemoteVideo:function(a){"undefined"==typeof a&&(a=!0),this.RTC()?document.getElementById(this.zingayaAPI().getVideoElementId(this.call())).style.display=a?"block":"none":VoxImplant.Utils.swfMovie("voximplantSWF").showRemoteVideo(this.call(),a)},setRemoteVideoPosition:function(a,b){if(this.RTC())throw new Error("Please use CSS to position '#voximplantcontainer' element");VoxImplant.Utils.swfMovie("voximplantSWF").setRemoteViewPosition(this.call(),a,b)},setRemoteVideoSize:function(a,b){if(this.RTC())throw new Error("Please use CSS to set size of '#voximplantcontainer' element");VoxImplant.Utils.swfMovie("voximplantSWF").setRemoteViewSize(this.call(),a,b)},sendInfo:function(a,b,c){var d,e,f=a.indexOf("/");if(-1==f?(d="application",e=a):(d=a.substring(0,f),e=a.substring(f+1)),this.RTC()){if(this.zingayaAPI().getCallState(this.call())!=VoxImplant.VI_CALL_STATE_CONNECTED)throw new Error("CALL_NOT_CONNECTED");this.zingayaAPI().sendSIPInfo(this.call(),d,e,b,c)}else c=VoxImplant.Utils.stringifyExtraHeaders(c),VoxImplant.Utils.swfMovie("voximplantSWF").sendSIPInfo(this.call(),d,e,b,c)},sendMessage:function(a){if(this.RTC()){if(this.zingayaAPI().getCallState(this.call())!=VoxImplant.VI_CALL_STATE_CONNECTED)throw new Error("CALL_NOT_CONNECTED");this.zingayaAPI().sendInstantMessage(this.call(),a)}else VoxImplant.Utils.swfMovie("voximplantSWF").sendMessage(this.call(),a)},setVideoSettings:function(a,b,c){this.RTC()?this.zingayaAPI().setConstraints(a,b,c):this.useRTCOnly||("[object Object]"==Object.prototype.toString.call(a)&&(a=JSON.stringify(a)),VoxImplant.Utils.swfMovie("voximplantSWF").setVideoSettings(a,this.call()))},getIncomingStreamInfo:function(){if(this.RTC());else if(!this.useRTCOnly)return JSON.parse(VoxImplant.Utils.swfMovie("voximplantSWF").getIncomingStreamInfo(this.call()))},getOutgoingStreamInfo:function(){if(this.RTC());else if(!this.useRTCOnly)return JSON.parse(VoxImplant.Utils.swfMovie("voximplantSWF").getOutgoingStreamInfo(this.call()))}},VoxImplant.Client=function(){this.config=null,this.calls=new Array;var a=VoxImplant.Call;delete VoxImplant.Call;var b=!1;this.eventListeners={},this.progressToneScript={US:"440@-19,480@-19;*(2/4/1+2)",RU:"425@-19;*(1/3/1)"},this.playingNow=!1,this.serversList=new Array;var c=100;this.audioSourcesList=new Array,this.videoSourcesList=new Array,this.deviceEnumAPI="undefined"!=typeof MediaStreamTrack&&"undefined"!=typeof MediaStreamTrack.getSources,this.gotSources=function(a){0!=this.audioSourcesList.length&&(this.audioSourcesList=new Array),0!=this.videoSourcesList.length&&(this.videoSourcesList=new Array);for(var b=0,c=0,d=0;d!=a.length;++d){var e=a[d];"audio"===e.kind?(c++,this.audioSourcesList.push({id:e.id,name:e.label||"Audio recording device "+c})):"video"===e.kind&&(b++,this.videoSourcesList.push({id:e.id,name:e.label||"Video recording device "+b}))}this.dispatchEvent({name:"SourcesInfoUpdated"})}.bind(this),this.__init=function(b){function e(){"undefined"!=typeof document&&(clearInterval(f),this.dispatchEvent({name:"SDKReady"}),this.deviceEnumAPI&&MediaStreamTrack.getSources(this.gotSources))}function h(){if("undefined"!=typeof document){if(clearInterval(f),null!=this.swfContainer){var a=document.getElementById(this.swfContainer);if(null==a)throw new Error("NO_SWF_CONTAINER");a.offsetWidth<215&&(a.style.minWidth=a.style.width="215px"),a.offsetHeight<138&&(a.style.minHeight=a.style.height="138px")}else a=document.createElement("div"),this.swfContainer=a.id="voximplantcontainer",a.style.minWidth=a.style.width="215px",a.style.minHeight=a.style.height="138px",document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a);-1!=navigator.userAgent.indexOf("Safari")&&(a.style.minWidth=a.style.width="310px");var b=document.createElement("div");b.id="voximplantcontainerSWF",a.appendChild(b);var c={id:"voximplantSWF",name:"voximplantSWF"},d=!1,e={allowScriptAccess:"always",wmode:"window"};window.voxImplantFlashAPIReady=i.bind(this);var h=("https:"==document.location.protocol?"https://":"http://")+"cdn.voximplant.com/VoxImplant2.swf?ver=250814";"undefined"!=typeof this.swfURL&&(h=this.swfURL),g.embedSWF(h,"voximplantcontainerSWF","100%","100%","11.3","http://cdn.voximplant.com/expressInstall.swf",d,e,c)}}function i(){if(this.dispatchEvent({name:"SDKReady"}),-1!=navigator.userAgent.indexOf("Safari")){var a=document.getElementById(this.swfContainer);null!=a&&(a.style.minWidth=a.style.width="215px")}for(var b=JSON.parse(VoxImplant.Utils.swfMovie("voximplantSWF").audioSources()),c=JSON.parse(VoxImplant.Utils.swfMovie("voximplantSWF").videoSources()),d=0;d<b.length;d++)this.audioSourcesList.push({id:d,name:b[d]});for(d=0;d<c.length;d++)this.videoSourcesList.push({id:d,name:c[d]});this.dispatchEvent({name:"SourcesInfoUpdated"})}if(null!=this.config)throw"VoxImplant.Client has been already initialized";if(this.config="undefined"!=typeof b?b:{},this.useFlashOnly=this.config.useFlashOnly===!0?!0:!1,this.useRTCOnly=this.config.useRTCOnly===!0?!0:!1,this.RTCsupported=!1,this.micRequired=this.config.micRequired!==!1?!0:!1,this.videoSupport=this.config.videoSupport!==!0?!1:!0,this.swfContainer="undefined"!=typeof this.config.swfContainer?this.config.swfContainer:null,this.progressToneCountry="undefined"!=typeof this.config.progressToneCountry?this.config.progressToneCountry:"US",this.progressTone=this.config.progressTone!==!0?!1:!0,this.showFlashSettings=this.config.showFlashSettings===!0?!0:!1,"undefined"!=typeof this.config.serverIp&&(this.serverIp=this.config.serverIp),"undefined"!=typeof this.config.swfURL&&(this.swfURL=this.config.swfURL),this.showDebugInfo="undefined"!=typeof this.config.showDebugInfo?this.config.showDebugInfo:!0,"undefined"!=typeof webkitRTCPeerConnection||"undefined"!=typeof mozRTCPeerConnection)if("undefined"!=typeof mozRTCPeerConnection)try{new mozRTCPeerConnection({iceServers:[]}),this.RTCsupported=!0}catch(d){}else this.RTCsupported=!0;if(this.RTCsupported&&!this.useFlashOnly){this.zingayaAPI=new VoxImplant.ZingayaAPI(this.videoSupport,this.micRequired),delete VoxImplant.ZingayaAPI,this.zingayaAPI.onConnectionEstablished=function(){this.connectionState(!0),this.dispatchEvent({name:"ConnectionEstablished"})}.bind(this),this.zingayaAPI.onConnectionFailed=function(a){this.serversList.length>1&&"undefined"==typeof this.serverIp?(this.serversList.splice(0,1),this.connectTo(this.serversList[0],!0)):this.dispatchEvent({name:"ConnectionFailed",message:a})}.bind(this),this.zingayaAPI.onConnectionClosed=function(){this.connectionState(!1),this.__cleanup(),this.dispatchEvent({name:"ConnectionClosed"}),this.progressTone&&this.stopProgressTone()}.bind(this),this.zingayaAPI.onLoginSuccessful=function(a,b){this.dispatchEvent({name:"AuthResult",result:!0,displayName:a,options:b})}.bind(this),this.zingayaAPI.onLoginFailed=function(a){this.dispatchEvent({name:"AuthResult",result:!1,code:a.errorCode,key:a.oneTimeKey})}.bind(this),this.zingayaAPI.onCallConnected=function(a){this.getCall(a).dispatchEvent({name:"Connected",call:this.getCall(a)}),this.progressTone&&this.stopProgressTone()}.bind(this),this.zingayaAPI.onCallEnded=function(a){this.getCall(a).dispatchEvent({name:"Disconnected",call:this.getCall(a)}),this.removeCall(a),this.progressTone&&this.stopProgressTone()}.bind(this),this.zingayaAPI.onCallFailed=function(a,b,c){this.getCall(a).dispatchEvent({name:"Failed",call:this.getCall(a),code:b,reason:c}),this.removeCall(a),this.progressTone&&this.stopProgressTone()}.bind(this),this.zingayaAPI.onMediaAccessGranted=function(){this.deviceEnumAPI&&MediaStreamTrack.getSources(this.gotSources),this.micRequired&&this.zingayaAPI.connectTo(this.host,"platform"),this.dispatchEvent({name:"MicAccessResult",result:!0})}.bind(this),this.zingayaAPI.onMediaAccessRejected=function(){this.dispatchEvent({name:"MicAccessResult",result:!1})}.bind(this),this.zingayaAPI.onIncomingCall=function(b,c,d,e){var f=new a(b,c,d,e,!0,this.zingayaAPI);this.calls.length>0&&this.zingayaAPI.setCallActive(b,!1),this.calls.push(f),this.dispatchEvent({name:"IncomingCall",call:f})}.bind(this),this.zingayaAPI.onCallRinging=function(a){this.getCall(a).dispatchEvent({name:"ProgressToneStart",call:this.getCall(a)}),this.progressTone&&this.playProgressTone()}.bind(this),this.zingayaAPI.onCallMediaStarted=function(a){this.getCall(a).dispatchEvent({name:"ProgressToneStop",call:this.getCall(a)}),this.progressTone&&this.stopProgressTone()}.bind(this),this.zingayaAPI.onInstantMessageReceived=function(a,b){this.getCall(a).dispatchEvent({name:"MessageReceived",call:this.getCall(a),text:b})}.bind(this),this.zingayaAPI.onSIPInfoReceived=function(a,b,c,d){this.getCall(a).dispatchEvent({name:"InfoReceived",call:this.getCall(a),mimeType:b,body:c,headers:d})}.bind(this),this.zingayaAPI.onTransferComplete=function(a){this.getCall(a).dispatchEvent({name:"TransferComplete",call:this.getCall(a)})}.bind(this),this.zingayaAPI.onTransferFailed=function(a){this.getCall(a).dispatchEvent({name:"TransferFailed",call:this.getCall(a)})}.bind(this),this.zingayaAPI.onNetStatsReceived=function(a){this.dispatchEvent({name:"NetStatsReceived",stats:a})}.bind(this),this.zingayaAPI.writeLog=function(a){if("function"==typeof this.writeLog)this.writeLog(a);else{var b={year:"numeric",month:"numeric",day:"numeric"};if(this.showDebugInfo&&BXIM){BXIM.webrtc.phoneLog("VI WebRTC: "+(new Date).toLocaleTimeString("en-US",b)+" "+a)}}}.bind(this),this.zingayaAPI.writeTrace=function(a){if("function"==typeof this.writeTrace)this.writeTrace(a);else{var b={year:"numeric",month:"numeric",day:"numeric"};if(this.showDebugInfo&&BXIM){BXIM.webrtc.phoneLog("VI WebRTC: "+(new Date).toLocaleTimeString("en-US",b)+" "+a)}}}.bind(this);var f=setInterval(e.bind(this),100)}else{if(this.useRTCOnly)throw new Error("NO_WEBRTC_SUPPORT");var g=function(){function B(){if(!u){try{var a=j.getElementsByTagName("body")[0].appendChild(R("span"));a.parentNode.removeChild(a)}catch(b){return}u=!0;for(var c=m.length,d=0;c>d;d++)m[d]()}}function C(a){u?a():m[m.length]=a}function D(b){if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof j.addEventListener!=a)j.addEventListener("load",b,!1);else if(typeof i.attachEvent!=a)S(i,"onload",b);else if("function"==typeof i.onload){var c=i.onload;i.onload=function(){c(),b()}}else i.onload=b}function E(){l?F():G()}function F(){var c=j.getElementsByTagName("body")[0],d=R(b);d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;!function(){if(typeof f.GetVariable!=a){var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),z.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(10>g)return g++,setTimeout(arguments.callee,10),void 0;c.removeChild(d),f=null,G()}()}else G()}function G(){var b=n.length;if(b>0)for(var c=0;b>c;c++){var d=n[c].id,e=n[c].callbackFn,f={success:!1,id:d};if(z.pv[0]>0){var g=Q(d);if(g)if(!T(n[c].swfVersion)||z.wk&&z.wk<312)if(n[c].expressInstall&&I()){var h={};h.data=n[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));for(var i={},j=g.getElementsByTagName("param"),k=j.length,l=0;k>l;l++)"movie"!=j[l].getAttribute("name").toLowerCase()&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));J(h,i,d,e)}else K(g),e&&e(f);else V(d,!0),e&&(f.success=!0,f.ref=H(d),e(f))}else if(V(d,!0),e){var m=H(d);m&&typeof m.SetVariable!=a&&(f.success=!0,f.ref=m),e(f)}}}function H(c){var d=null,e=Q(c);if(e&&"OBJECT"==e.nodeName)if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function I(){return!v&&T("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function J(b,c,d,e){v=!0,s=e||null,t={success:!1,id:d};var g=Q(d);if(g){"OBJECT"==g.nodeName?(q=L(g),r=null):(q=g,r=d),b.id=f,(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)&&(b.width="310"),(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)&&(b.height="137"),j.title=j.title.slice(0,47)+" - Flash Player Installation";var h=z.ie&&z.win?"ActiveX":"PlugIn",k="MMredirectURL="+i.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+j.title;if(typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k,z.ie&&z.win&&4!=g.readyState){var l=R("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}M(b,c,d)}}function K(a){if(z.ie&&z.win&&4!=a.readyState){var b=R("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(L(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(L(a),a)}function L(a){var c=R("div");if(z.win&&z.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e)for(var f=e.length,g=0;f>g;g++)1==e[g].nodeType&&"PARAM"==e[g].nodeName||8==e[g].nodeType||c.appendChild(e[g].cloneNode(!0))}}return c}function M(c,d,f){var g,h=Q(f);if(z.wk&&z.wk<312)return g;if(h)if(typeof c.id==a&&(c.id=f),z.ie&&z.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&("data"==j.toLowerCase()?d.movie=c[j]:"styleclass"==j.toLowerCase()?i+=' class="'+c[j]+'"':"classid"!=j.toLowerCase()&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",o[o.length]=c.id,g=Q(c.id)}else{var m=R(b);m.setAttribute("type",e);for(var n in c)c[n]!=Object.prototype[n]&&("styleclass"==n.toLowerCase()?m.setAttribute("class",c[n]):"classid"!=n.toLowerCase()&&m.setAttribute(n,c[n]));for(var p in d)d[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&N(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}return g}function N(a,b,c){var d=R("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function O(a){var b=Q(a);b&&"OBJECT"==b.nodeName&&(z.ie&&z.win?(b.style.display="none",function(){4==b.readyState?P(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function P(a){var b=Q(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function Q(a){var b=null;try{b=j.getElementById(a)}catch(c){}return b}function R(a){return j.createElement(a)}function S(a,b,c){a.attachEvent(b,c),p[p.length]=[a,b,c]}function T(a){var b=z.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function U(c,d,e,f){if(!z.ie||!z.mac){var g=j.getElementsByTagName("head")[0];if(g){var h=e&&"string"==typeof e?e:"screen";if(f&&(w=null,x=null),!w||x!=h){var i=R("style");i.setAttribute("type","text/css"),i.setAttribute("media",h),w=g.appendChild(i),z.ie&&z.win&&typeof j.styleSheets!=a&&j.styleSheets.length>0&&(w=j.styleSheets[j.styleSheets.length-1]),x=h}z.ie&&z.win?w&&typeof w.addRule==b&&w.addRule(c,d):w&&typeof j.createTextNode!=a&&w.appendChild(j.createTextNode(c+" {"+d+"}"))}}}function V(a,b){if(y){var c=b?"visible":"hidden";u&&Q(a)?Q(a).style.visibility=c:U("#"+a,"visibility:"+c)}}function W(b){var c=/[\\\"<>\.;]/,d=null!=c.exec(b);return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var q,r,s,t,w,x,a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",h="onreadystatechange",i=window,j=document,k=navigator,l=!1,m=[E],n=[],o=[],p=[],u=!1,v=!1,y=!0,z=function(){var f=typeof j.getElementById!=a&&typeof j.getElementsByTagName!=a&&typeof j.createElement!=a,g=k.userAgent.toLowerCase(),h=k.platform.toLowerCase(),m=h?/win/.test(h):/win/.test(g),n=h?/mac/.test(h):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof k.plugins!=a&&typeof k.plugins[c]==b)r=k.plugins[c].description,!r||typeof k.mimeTypes!=a&&k.mimeTypes[e]&&!k.mimeTypes[e].enabledPlugin||(l=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof i.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}();return function(){z.w3&&((typeof j.readyState!=a&&"complete"==j.readyState||typeof j.readyState==a&&(j.getElementsByTagName("body")[0]||j.body))&&B(),u||(typeof j.addEventListener!=a&&j.addEventListener("DOMContentLoaded",B,!1),z.ie&&z.win&&(j.attachEvent(h,function(){"complete"==j.readyState&&(j.detachEvent(h,arguments.callee),B())}),i==top&&function(){if(!u){try{j.documentElement.doScroll("left")}catch(a){return setTimeout(arguments.callee,0),void 0}B()}}()),z.wk&&function(){return u?void 0:/loaded|complete/.test(j.readyState)?(B(),void 0):(setTimeout(arguments.callee,0),void 0)}(),D(B)))}(),function(){z.ie&&z.win&&window.attachEvent("onunload",function(){for(var a=p.length,b=0;a>b;b++)p[b][0].detachEvent(p[b][1],p[b][2]);for(var c=o.length,d=0;c>d;d++)O(o[d]);for(var e in z)z[e]=null;z=null;for(var f in g)g[f]=null;g=null})}(),{registerObject:function(a,b,c,d){if(z.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,n[n.length]=e,V(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return z.w3?H(a):void 0},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};z.w3&&!(z.wk&&z.wk<312)&&c&&d&&e&&f&&g?(V(d,!1),C(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(T(g)){var s=M(n,p,d);n.id==d&&V(d,!0),m.success=!0,m.ref=s}else{if(h&&I())return n.data=h,J(n,p,d,l),void 0;V(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){y=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(a,b,c){return z.w3?M(a,b,c):undefined},showExpressInstall:function(a,b,c,d){z.w3&&I()&&J(a,b,c,d)},removeSWF:function(a){z.w3&&O(a)},createCSS:function(a,b,c,d){z.w3&&U(a,b,c,d)},addDomLoadEvent:C,addLoadEvent:D,getQueryParamValue:function(a){var b=j.location.search||j.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return W(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return W(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(v){var a=Q(f);a&&q&&(a.parentNode.replaceChild(q,a),r&&(V(r,!0),z.ie&&z.win&&(q.style.display="block")),s&&s(t)),v=!1}}}}();if(!g.hasFlashPlayerVersion("11.3"))throw new Error("OLD_FLASH_VERSION");var f=setInterval(h.bind(this),100)}window.VILog=function(a){if("function"==typeof this.writeLog)this.writeLog(a);else{var b={year:"numeric",month:"numeric",day:"numeric"};if(this.showDebugInfo&&BXIM){BXIM.webrtc.phoneLog("VI FLASH: "+(new Date).toLocaleTimeString("en-US",b)+" "+a)}}}.bind(this),window.VIConnectionEstablished=function(){this.connectionState(!0),this.dispatchEvent({name:"ConnectionEstablished"})}.bind(this),window.VIConnectionFailed=function(){this.serversList.length>1&&"undefined"==typeof this.serverIp?(this.serversList.splice(0,1),this.connectTo(this.serversList[0],!0)):this.dispatchEvent({name:"ConnectionFailed"})}.bind(this),window.VIConnectionClosed=function(){this.connectionState(!1),this.__cleanup(),this.dispatchEvent({name:"ConnectionClosed"}),this.progressTone&&this.stopProgressTone()}.bind(this),window.VIAuthFailed=function(a,b){this.dispatchEvent({name:"AuthResult",result:!1,code:a,key:b})}.bind(this),window.VIAuthSuccessful=function(a,b){"string"==typeof b&&(b=JSON.parse(b)),this.dispatchEvent({name:"AuthResult",result:!0,displayName:a,options:b})}.bind(this),window.VICallConnected=function(a){this.getCall(a).dispatchEvent({name:"Connected",call:this.getCall(a)}),this.progressTone&&this.stopProgressTone()}.bind(this),window.VICallDisconnected=function(a){this.getCall(a).dispatchEvent({name:"Disconnected",call:this.getCall(a)}),this.removeCall(a),this.progressTone&&this.stopProgressTone()}.bind(this),window.VICallFailed=function(a,b,c){this.getCall(a).dispatchEvent({name:"Failed",call:this.getCall(a),code:b,reason:c}),this.removeCall(a),this.progressTone&&this.stopProgressTone()}.bind(this),window.VIMicAccessResult=function(a){this.dispatchEvent({name:"MicAccessResult",result:a})}.bind(this),window.VIProgressToneStart=function(a){this.getCall(a).dispatchEvent({name:"ProgressToneStart",call:this.getCall(a)}),this.progressTone&&this.playProgressTone()}.bind(this),window.VIProgressToneStop=function(a){this.getCall(a).dispatchEvent({name:"ProgressToneStop",call:this.getCall(a)}),this.progressTone&&this.stopProgressTone()}.bind(this),window.VIIncomingCall=function(b,c,d,e){var f=new a(b,c,d,null!=e?JSON.parse(e):{},!1);this.calls.length>0&&this.zingayaAPI.setCallActive(b,!1),this.calls.push(f),this.dispatchEvent({name:"IncomingCall",call:f})}.bind(this),window.VISIPInfoReceived=function(a,b,c,d,e){"application"==b&&"zingaya-im"==c?this.getCall(a).dispatchEvent({name:"MessageReceived",call:this.getCall(a),text:d}):(null!=e&&(e=JSON.parse(e)),this.getCall(a).dispatchEvent({name:"InfoReceived",call:this.getCall(a),mimeType:b+"/"+c,body:d,headers:e}))}.bind(this),window.VIToneScriptPlaybackStop=function(){this.dispatchEvent({name:"PlaybackFinished"})}.bind(this),window.VITransferComplete=function(a){this.getCall(a).dispatchEvent({name:"TransferComplete",call:this.getCall(a)})}.bind(this),window.VITransferFailed=function(a){this.getCall(a).dispatchEvent({name:"TransferFailed",call:this.getCall(a)})}.bind(this),window.VIPacketLossInfo=function(a){this.dispatchEvent({name:"NetStatsReceived",stats:{packetLoss:a}})}.bind(this)},this.connectionState=function(a){return"undefined"==typeof a?b:(b=a,void 0)},this.getCall=function(a){for(var b=0;b<this.calls.length;b++)if(this.calls[b].call()==a)return this.calls[b];return null},this.removeCall=function(a){for(var b=new Array,c=0;c<this.calls.length;c++)this.calls[c].call()!=a?b.push(this.calls[c]):delete this.calls[c];this.calls=b},this.playProgressTone=function(){null!=this.progressToneScript[this.progressToneCountry]&&(this.playingNow||this.playToneScript(this.progressToneScript[this.progressToneCountry]),this.playingNow=!0)},this.stopProgressTone=function(){this.playingNow&&(this.stopPlayback(),this.playingNow=!1)},this.__call=function(b,c,d,e){if("undefined"!=typeof d&&("undefined"==typeof e&&(e=new Object),e["VI-CallData"]=d),!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");if(this.RTCsupported&&!this.useFlashOnly){var f=this.zingayaAPI.callTo(b,c,e),g=new a(f,b,"",e,!0,this.zingayaAPI);this.calls.length>0&&this.zingayaAPI.setCallActive(f,!1)}else this.useRTCOnly||(e=JSON.stringify(e),f=VoxImplant.Utils.swfMovie("voximplantSWF").call(b,c,null,e),g=new a(f,b,"",e,!1),this.calls.length>0&&VoxImplant.Utils.swfMovie("voximplantSWF").setCallActive(f,!1));return this.calls.push(g),g},this.__volume=function(a){return"undefined"==typeof a?c:(c=a,void 0)},this.__cleanup=function(){if(this.calls.length>0){var a=new Array;for(var b in this.calls)a.push(this.calls[b].id()),this.connectionState()&&this.calls[b].hangup();for(var b in a)this.removeCall(a[b])}}},VoxImplant.Client.prototype={call:function(a,b,c,d){return this.__call(a,b,c,d)},config:function(){return this.config},connect:function(){function a(a){var b=String(a).indexOf(";");-1==b?host=a:(this.serversList=a.split(";"),host=this.serversList[0]),this.connectTo(host)}"undefined"!=typeof this.serverIp?(host=this.serverIp,this.connectTo(host)):VoxImplant.Utils.getServers(a.bind(this),!1,this)},connectTo:function(a,b){if(this.connectionState())throw new Error("ALREADY_CONNECTED_TO_VOXIMPLANT");this.host=a,this.RTCsupported&&!this.useFlashOnly?this.micRequired&&b!==!0?this.zingayaAPI.requestMedia(this.videoSupport,this.zingayaAPI.onMediaAccessGranted,this.zingayaAPI.onMediaAccessRejected):this.zingayaAPI.connectTo(a,"platform"):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").connect(a,b===!0?!1:this.micRequired,this.micRequired&&this.showFlashSettings)},disconnect:function(){if(!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");this.__cleanup(),this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.destroy():this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").disconnect()},init:function(a){this.__init(a)},setOperatorACDStatus:function(a){if(!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.setOperatorACDStatus(a):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setOperatorACDStatus(a)},login:function(a,b,c){if(c="undefined"!=typeof c?c:null,!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.login(a,b,c):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").login(a,b,JSON.stringify(c))},loginWithCode:function(a,b,c){if(c="undefined"!=typeof c?c:null,!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.loginStage2(a,b,c):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").loginStage2(a,b,JSON.stringify(c))},requestOneTimeLoginKey:function(a){if(!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.loginGenerateOneTimeKey(a):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").requestOneTimeLoginKey(a)},loginWithOneTimeKey:function(a,b,c){if(c="undefined"!=typeof c?c:null,!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.loginUsingOneTimeKey(a,b,c):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").loginUsingOneTimeKey(a,b,JSON.stringify(c))},setPresence:function(a){if(!this.connectionState())throw new Error("NOT_CONNECTED_TO_VOXIMPLANT");this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.setPresence(a):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setPresence(a)},connected:function(){return this.connectionState()},showLocalVideo:function(a){if("undefined"==typeof a&&(a=!0),this.RTCsupported&&!this.useFlashOnly)if(a)if(null==document.getElementById("voximplantlocalvideo")){var b=document.createElement("video");b.id="voximplantlocalvideo",b.autoplay="autoplay",b.muted="true",document.body.firstChild?document.body.insertBefore(b,document.body.firstChild):document.body.appendChild(b),this.zingayaAPI.setLocalVideoSink(b)}else document.getElementById("voximplantlocalvideo").style.display="block";else document.getElementById("voximplantlocalvideo").style.display="none";else this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").showLocalVideo(a)},setLocalVideoPosition:function(a,b){if(this.RTCsupported&&!this.useFlashOnly)throw new Error("Please use CSS to position '#voximplantlocalvideo' element");this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setSelfViewPosition(a,b)},setLocalVideoSize:function(a,b){if(this.RTCsupported&&!this.useFlashOnly)throw new Error("Please use CSS to set size of '#voximplantlocalvideo' element");this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setSelfViewSize(a,b)},setVideoSettings:function(a){this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.setConstraints(a,function(){null!=document.getElementById("voximplantlocalvideo")&&this.zingayaAPI.setLocalVideoSink(document.getElementById("voximplantlocalvideo"))}.bind(this)):this.useRTCOnly||("[object Object]"==Object.prototype.toString.call(a)&&(a=JSON.stringify(a)),VoxImplant.Utils.swfMovie("voximplantSWF").setVideoSettings(a))},playToneScript:function(a,b){this.RTCsupported&&!this.useFlashOnly?VoxImplant.Utils.playToneScript(a,b):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").playToneScript(a,b)},stopPlayback:function(){this.RTCsupported&&!this.useFlashOnly?VoxImplant.Utils.stopPlayback()&&this.dispatchEvent({name:"PlaybackFinished"}):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").stopPlayback()},volume:function(a){return"undefined"==typeof a?this.__volume():(a>100&&(a=100),0>a&&(a=0),this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.setPlaybackVolume(a/100):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").changeIncomingAudioVolume(a),this.__volume(a),void 0)},audioSources:function(){if(this.RTCsupported&&!this.useFlashOnly&&!this.deviceEnumAPI)throw new Error("NOT_SUPPORTED [MediaStreamTrack.getSources]");return this.audioSourcesList},videoSources:function(){if(this.RTCsupported&&!this.useFlashOnly&&!this.deviceEnumAPI)throw new Error("NOT_SUPPORTED [MediaStreamTrack.getSources]");return this.videoSourcesList},useAudioSource:function(a,b,c){this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.useAudioSource(a,b,c):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setAudioSource(a)},useVideoSource:function(a,b,c){this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.useVideoSource(a,function(){null!=document.getElementById("voximplantlocalvideo")&&this.zingayaAPI.attachLocalVideoToSink(document.getElementById("voximplantlocalvideo")),"function"==typeof b&&b()}.bind(this),c):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setVideoSource(a)},attachRecordingDevice:function(a,b){!this.RTCsupported||this.useFlashOnly||this.micRequired||this.zingayaAPI.requestMedia(this.videoSupport,a,b)},detachRecordingDevice:function(){!this.RTCsupported||this.useFlashOnly||this.micRequired||this.zingayaAPI.stopLocalStream()},showFlashSettingsPanel:function(a){"undefined"==typeof a&&(a="default"),this.RTCsupported&&!this.useFlashOnly||this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").showFlashSettings(a)},setCallActive:function(a,b){this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.setCallActive(a.call(),b):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setCallActive(a.call(),b)},sendVideo:function(a){"undefined"==typeof a&&(a=!0),this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.sendVideo(a):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").sendVideo(a)},isRTCsupported:function(){return this.RTCsupported},transferCall:function(a,b){this.RTCsupported&&!this.useFlashOnly?this.zingayaAPI.transferCall(a.call(),b.call()):this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").transferCall(a.call(),b.call())},setSwfColor:function(a){this.RTCsupported&&!this.useFlashOnly||this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setStageColor(a)},setCodecPayload:function(a){this.RTCsupported&&!this.useFlashOnly||this.useRTCOnly||VoxImplant.Utils.swfMovie("voximplantSWF").setCodecPayload(a)}},VoxImplant.Client.prototype.addEventListener=function(a,b){"undefined"==typeof this.eventListeners[a]&&(this.eventListeners[a]=[]),this.eventListeners[a].push(b)},VoxImplant.Call.prototype.addEventListener=function(a,b){"undefined"==typeof this.eventListeners[a]&&(this.eventListeners[a]=[]),this.eventListeners[a].push(b)},VoxImplant.Client.prototype.removeEventListener=function(a,b){if("undefined"!=typeof this.eventListeners[a])for(var c=0;c<this.eventListeners[a].length;c++)if(this.eventListeners[a][c]==b){this.eventListeners[a].splice(c,1);break}},VoxImplant.Call.prototype.removeEventListener=function(a,b){if("undefined"!=typeof this.eventListeners[a])for(var c=0;c<this.eventListeners[a].length;c++)if(this.eventListeners[a][c]==b){this.eventListeners[a].splice(c,1);break}},VoxImplant.Client.prototype.dispatchEvent=VoxImplant.Call.prototype.dispatchEvent=function(a){var b=a.name;if("undefined"!=typeof this.eventListeners[b])for(var c=0;c<this.eventListeners[b].length;c++)"function"==typeof this.eventListeners[b][c]&&this.eventListeners[b][c](a)},VoxImplant.getInstance=function(){return VoxImplant._clientInstance},VoxImplant.Config={},VoxImplant.FlashVideoSettings={},VoxImplant.VideoSettings={},VoxImplant.AudioSourceInfo={},VoxImplant.VideoSourceInfo={},VoxImplant.NetworkInfo={},VoxImplant.Events={SDKReady:"SDKReady",ConnectionEstablished:"ConnectionEstablished",ConnectionFailed:"ConnectionFailed",ConnectionClosed:"ConnectionClosed",AuthResult:"AuthResult",PlaybackFinished:"PlaybackFinished",MicAccessResult:"MicAccessResult",IncomingCall:"IncomingCall",SourcesInfoUpdated:"SourcesInfoUpdated",NetStatsReceived:"NetStatsReceived"},VoxImplant.CallEvents={Connected:"Connected",Disconnected:"Disconnected",Failed:"Failed",ProgressToneStart:"ProgressToneStart",ProgressToneStop:"ProgressToneStop",MessageReceived:"MessageReceived",InfoReceived:"InfoReceived",TransferComplete:"TransferComplete",TransferFailed:"TransferFailed"},VoxImplant.OperatorACDStatuses={Offline:"OFFLINE",Online:"ONLINE",Ready:"READY",InService:"IN_SERVICE",AfterService:"AFTER_SERVICE",Timeout:"TIMEOUT",DND:"DND"},VoxImplant._clientInstance||(VoxImplant._clientInstance=new VoxImplant.Client,delete VoxImplant.Client)}(window.VoxImplant=window.VoxImplant||{});